<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Vue,Vuex," />





  <link rel="alternate" href="/atom.xml" title="PyCoder" type="application/atom+xml" />






<meta name="description" content="Vuex æ¦‚å¿µç¯‡Vuex æ˜¯ä»€ä¹ˆï¼ŸVuex æ˜¯ä¸€ä¸ªä¸“ä¸º Vue.js åº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ã€‚å®ƒé‡‡ç”¨é›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚ ä»€ä¹ˆæ˜¯â€œçŠ¶æ€ç®¡ç†æ¨¡å¼â€ï¼Ÿä»è½¯ä»¶è®¾è®¡çš„è§’åº¦ï¼Œå°±æ˜¯ä»¥ä¸€ç§ç»Ÿä¸€çš„çº¦å®šå’Œå‡†åˆ™ï¼Œå¯¹å…¨å±€å…±äº«çŠ¶æ€æ•°æ®è¿›è¡Œç®¡ç†å’Œæ“ä½œçš„è®¾è®¡ç†å¿µã€‚ä½ å¿…é¡»æŒ‰ç…§è¿™ç§è®¾è®¡ç†å¿µå’Œæ¶æ„æ¥å¯¹ä½ é¡¹ç›®é‡Œå…±äº«çŠ¶æ€æ•°æ®è¿›è¡ŒCRUDã€‚æ‰€ä»¥æ‰€è°“çš„â€œçŠ¶æ€ç®¡ç†æ¨¡å¼â€å°±">
<meta name="keywords" content="Vue,Vuex">
<meta property="og:type" content="article">
<meta property="og:title" content="ç©çƒ‚ Vuex">
<meta property="og:url" content="http://blog.pycoder.club/2018/06/26/vuex-record/index.html">
<meta property="og:site_name" content="PyCoder">
<meta property="og:description" content="Vuex æ¦‚å¿µç¯‡Vuex æ˜¯ä»€ä¹ˆï¼ŸVuex æ˜¯ä¸€ä¸ªä¸“ä¸º Vue.js åº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ã€‚å®ƒé‡‡ç”¨é›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚ ä»€ä¹ˆæ˜¯â€œçŠ¶æ€ç®¡ç†æ¨¡å¼â€ï¼Ÿä»è½¯ä»¶è®¾è®¡çš„è§’åº¦ï¼Œå°±æ˜¯ä»¥ä¸€ç§ç»Ÿä¸€çš„çº¦å®šå’Œå‡†åˆ™ï¼Œå¯¹å…¨å±€å…±äº«çŠ¶æ€æ•°æ®è¿›è¡Œç®¡ç†å’Œæ“ä½œçš„è®¾è®¡ç†å¿µã€‚ä½ å¿…é¡»æŒ‰ç…§è¿™ç§è®¾è®¡ç†å¿µå’Œæ¶æ„æ¥å¯¹ä½ é¡¹ç›®é‡Œå…±äº«çŠ¶æ€æ•°æ®è¿›è¡ŒCRUDã€‚æ‰€ä»¥æ‰€è°“çš„â€œçŠ¶æ€ç®¡ç†æ¨¡å¼â€å°±">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2018/6/23/1642a81fb7af9544?w=701&h=551&f=png&s=7018">
<meta property="og:updated_time" content="2018-06-26T13:31:59.927Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ç©çƒ‚ Vuex">
<meta name="twitter:description" content="Vuex æ¦‚å¿µç¯‡Vuex æ˜¯ä»€ä¹ˆï¼ŸVuex æ˜¯ä¸€ä¸ªä¸“ä¸º Vue.js åº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ã€‚å®ƒé‡‡ç”¨é›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚ ä»€ä¹ˆæ˜¯â€œçŠ¶æ€ç®¡ç†æ¨¡å¼â€ï¼Ÿä»è½¯ä»¶è®¾è®¡çš„è§’åº¦ï¼Œå°±æ˜¯ä»¥ä¸€ç§ç»Ÿä¸€çš„çº¦å®šå’Œå‡†åˆ™ï¼Œå¯¹å…¨å±€å…±äº«çŠ¶æ€æ•°æ®è¿›è¡Œç®¡ç†å’Œæ“ä½œçš„è®¾è®¡ç†å¿µã€‚ä½ å¿…é¡»æŒ‰ç…§è¿™ç§è®¾è®¡ç†å¿µå’Œæ¶æ„æ¥å¯¹ä½ é¡¹ç›®é‡Œå…±äº«çŠ¶æ€æ•°æ®è¿›è¡ŒCRUDã€‚æ‰€ä»¥æ‰€è°“çš„â€œçŠ¶æ€ç®¡ç†æ¨¡å¼â€å°±">
<meta name="twitter:image" content="https://user-gold-cdn.xitu.io/2018/6/23/1642a81fb7af9544?w=701&h=551&f=png&s=7018">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: 'NH5U9FJ3EE',
      apiKey: 'a6c53121db570f7771c0f203ae3be14c',
      indexName: 'PyCoder',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"æˆ‘ä»¬æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœ: ${query}","hits_stats":"æ‰¾åˆ°çº¦${hits}æ¡ç»“æœï¼ˆç”¨æ—¶${time}msï¼‰"}
    }
  };
</script>



  <link rel="canonical" href="http://blog.pycoder.club/2018/06/26/vuex-record/"/>





  <title>ç©çƒ‚ Vuex | PyCoder</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-119814667-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?4731f17b6b61a4c41a8706e5bba08e5b";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">PyCoder</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">åˆ˜å³»å»·çš„åšå®¢</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            æœç´¢
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.pycoder.club/2018/06/26/vuex-record/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Junting">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PyCoder">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">ç©çƒ‚ Vuex</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-06-26T21:23:49+08:00">
                2018-06-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Vuex/" itemprop="url" rel="index">
                    <span itemprop="name">Vuex</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/06/26/vuex-record/" class="leancloud_visitors" data-flag-title="ç©çƒ‚ Vuex">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">çƒ­åº¦&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
                 <span>â„ƒ</span>
             </span>
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="Vuex-æ¦‚å¿µç¯‡"><a href="#Vuex-æ¦‚å¿µç¯‡" class="headerlink" title="Vuex æ¦‚å¿µç¯‡"></a>Vuex æ¦‚å¿µç¯‡</h2><h3 id="Vuex-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Vuex-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Vuex æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Vuex æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>Vuex æ˜¯ä¸€ä¸ªä¸“ä¸º Vue.js åº”ç”¨ç¨‹åºå¼€å‘çš„<strong>çŠ¶æ€ç®¡ç†æ¨¡å¼</strong>ã€‚å®ƒé‡‡ç”¨<strong>é›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€</strong>ï¼Œå¹¶ä»¥ç›¸åº”çš„<strong>è§„åˆ™</strong>ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯â€œçŠ¶æ€ç®¡ç†æ¨¡å¼â€ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯â€œçŠ¶æ€ç®¡ç†æ¨¡å¼â€ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯â€œçŠ¶æ€ç®¡ç†æ¨¡å¼â€ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯â€œçŠ¶æ€ç®¡ç†æ¨¡å¼â€ï¼Ÿ</h3><p>ä»è½¯ä»¶è®¾è®¡çš„è§’åº¦ï¼Œå°±æ˜¯ä»¥ä¸€ç§ç»Ÿä¸€çš„çº¦å®šå’Œå‡†åˆ™ï¼Œå¯¹å…¨å±€å…±äº«çŠ¶æ€æ•°æ®è¿›è¡Œç®¡ç†å’Œæ“ä½œçš„è®¾è®¡ç†å¿µã€‚ä½ å¿…é¡»æŒ‰ç…§è¿™ç§è®¾è®¡ç†å¿µå’Œæ¶æ„æ¥å¯¹ä½ é¡¹ç›®é‡Œå…±äº«çŠ¶æ€æ•°æ®è¿›è¡ŒCRUDã€‚æ‰€ä»¥æ‰€è°“çš„â€œçŠ¶æ€ç®¡ç†æ¨¡å¼â€å°±æ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡çš„ä¸€ç§æ¶æ„æ¨¡å¼ï¼ˆæ€æƒ³ï¼‰ã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆéœ€è¦è¿™ç§â€œçŠ¶æ€ç®¡ç†æ¨¡å¼â€åº”ç”¨åˆ°é¡¹ç›®ä¸­å‘¢ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦è¿™ç§â€œçŠ¶æ€ç®¡ç†æ¨¡å¼â€åº”ç”¨åˆ°é¡¹ç›®ä¸­å‘¢ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦è¿™ç§â€œçŠ¶æ€ç®¡ç†æ¨¡å¼â€åº”ç”¨åˆ°é¡¹ç›®ä¸­å‘¢ï¼Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦è¿™ç§â€œçŠ¶æ€ç®¡ç†æ¨¡å¼â€åº”ç”¨åˆ°é¡¹ç›®ä¸­å‘¢ï¼Ÿ</h3><p>ç°å¦‚ä»Šï¼Œæµè¡Œç»„ä»¶åŒ–ã€æ¨¡å—åŒ–å¼€å‘ï¼Œå¤šäººå¼€å‘å„è‡ªç»„ä»¶çš„æ—¶å€™ï¼Œä¸éš¾ä¿è¯å„ä¸ªç»„ä»¶éƒ½æ˜¯å”¯ä¸€æ€§çš„ï¼Œå¤šä¸ªç»„ä»¶å…±äº«çŠ¶æ€è‚¯å®šæ˜¯å­˜åœ¨çš„ï¼Œå…±äº«çŠ¶æ€åˆæ˜¯è°éƒ½å¯ä»¥è¿›è¡Œæ“ä½œå’Œä¿®æ”¹çš„ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´<strong>æ‰€æœ‰å¯¹å…±äº«çŠ¶æ€çš„æ“ä½œéƒ½æ˜¯ä¸å¯é¢„æ–™çš„</strong>ï¼ŒåæœŸå‡ºç°é—®é¢˜ï¼Œè¿›è¡Œ debug ä¹Ÿæ˜¯å›°éš¾é‡é‡ï¼Œå¾€å¾€æˆ‘ä»¬æ˜¯å°½é‡å»é¿å…å…¨å±€å˜é‡ã€‚</p>
<p>ä½†å¤§é‡çš„ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œä¸åŒçš„æ¨¡å—ï¼ˆç»„ä»¶ï¼‰ä¹‹é—´ç¡®å®éœ€è¦å…±äº«æ•°æ®ï¼Œä¹Ÿéœ€è¦å¯¹å…¶è¿›è¡Œä¿®æ”¹æ“ä½œã€‚ä¹Ÿå°±å¼•å‘è½¯ä»¶è®¾è®¡ä¸­çš„çŸ›ç›¾ï¼š<strong>æ¨¡å—ï¼ˆç»„ä»¶ï¼‰ä¹‹é—´éœ€è¦å…±äº«æ•°æ®</strong> å’Œ <strong>æ•°æ®å¯èƒ½è¢«ä»»æ„ä¿®æ”¹å¯¼è‡´ä¸å¯é¢„æ–™çš„ç»“æœ</strong>ã€‚</p>
<p>ä¸ºäº†è§£å†³å…¶çŸ›ç›¾ï¼Œè½¯ä»¶è®¾è®¡ä¸Šå°±æå‡ºäº†ä¸€ç§è®¾è®¡å’Œæ¶æ„æ€æƒ³ï¼Œå°†å…¨å±€çŠ¶æ€è¿›è¡Œç»Ÿä¸€çš„ç®¡ç†ï¼Œå¹¶ä¸”éœ€è¦è·å–ã€ä¿®æ”¹ç­‰æ“ä½œå¿…é¡»æŒ‰æˆ‘è®¾è®¡çš„å¥—è·¯æ¥ã€‚å°±å¥½æ¯”é©¬è·¯ä¸Šå¿…é¡»éµå®ˆçš„äº¤é€šè§„åˆ™ï¼Œå³è¡Œæ–‘é©¬çº¿å°±æ˜¯åªèƒ½å³è½¬ä¸€ä¸ªé“ç†ï¼Œç»Ÿä¸€äº†å¯¹å…¨å±€çŠ¶æ€ç®¡ç†çš„å”¯ä¸€å…¥å£ï¼Œä½¿ä»£ç ç»“æ„æ¸…æ™°ã€æ›´åˆ©äºç»´æŠ¤ã€‚</p>
<blockquote>
<p>Vuex æ˜¯å€Ÿé‰´äº† Flux ã€Redux å’Œ The Elm Architecture  æ¶æ„æ¨¡å¼ã€è®¾è®¡æ€æƒ³çš„äº§ç‰©ã€‚</p>
</blockquote>
<p><img src="https://user-gold-cdn.xitu.io/2018/6/23/1642a81fb7af9544?w=701&amp;h=551&amp;f=png&amp;s=7018" alt="Vuexè¿è¡Œæœºåˆ¶"></p>
<h3 id="ä»€ä¹ˆæƒ…å†µä¸‹æˆ‘åº”è¯¥ä½¿ç”¨-Vuexï¼Ÿ"><a href="#ä»€ä¹ˆæƒ…å†µä¸‹æˆ‘åº”è¯¥ä½¿ç”¨-Vuexï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæƒ…å†µä¸‹æˆ‘åº”è¯¥ä½¿ç”¨ Vuexï¼Ÿ"></a>ä»€ä¹ˆæƒ…å†µä¸‹æˆ‘åº”è¯¥ä½¿ç”¨ Vuexï¼Ÿ</h3><p>ä¸æ‰“ç®—å¼€å‘å¤§å‹å•é¡µåº”ç”¨ï¼Œä½¿ç”¨ Vuex å¯èƒ½æ˜¯ç¹çå†—ä½™çš„ã€‚åº”ç”¨å¤Ÿç®€å•ï¼Œæœ€å¥½ä¸è¦ä½¿ç”¨ Vuexã€‚ä¸€ä¸ªç®€å•çš„ <a href="https://cn.vuejs.org/v2/guide/components.html#%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener">global event bus </a> (çˆ¶å­ç»„ä»¶é€šä¿¡ï¼Œçˆ¶ç»„ä»¶ç®¡ç†æ‰€éœ€çš„æ•°æ®çŠ¶æ€)å°±è¶³å¤Ÿæ‚¨æ‰€éœ€äº†ã€‚æ„å»ºä¸€ä¸ªä¸­å¤§å‹å•é¡µåº”ç”¨ï¼Œæ‚¨å¾ˆå¯èƒ½ä¼šè€ƒè™‘å¦‚ä½•æ›´å¥½åœ°åœ¨ç»„ä»¶å¤–éƒ¨ç®¡ç†çŠ¶æ€ï¼ŒVuex å°†ä¼šæˆä¸ºè‡ªç„¶è€Œç„¶çš„é€‰æ‹©ã€‚</p>
<blockquote>
<p>ä¸ªäººè§è§£ï¼Œä»€ä¹ˆæ—¶å€™ç”¨ï¼Ÿç®¡ä½ å°ä¸­å¤§å‹åº”ç”¨ï¼Œæˆ‘å°±æƒ³ç”¨å°±ç”¨å‘—ï¼Œä¸€ä¸ªé•¿æœŸæ„å»ºçš„å°å‹åº”ç”¨é¡¹ç›®ï¼Œè°èƒ½çŸ¥é“é¡¹ç›®éœ€æ±‚ä»¥åä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼Œæ¯•ç«Ÿåœ¨è¿™æµ®èºçš„æ—¶ä»£ï¼Œéœ€æ±‚å°±è·Ÿå·å‰§å˜è„¸ä¸€æ ·å¿«ï¼Œå¯¹ä¸å¯¹ï¼Ÿæ¯•ç«Ÿå­¦ä¹ äº† Vuex ä¸ç«‹é©¬ç”¨åˆ°é¡¹ç›®å®æˆ˜ä¸­ï¼Œä½ æ°¸è¿œä¸å¯èƒ½æ­å¼€ Vuex çš„é¢çº±ã€‚é¡¹ç›®ä¸­ä½¿ç”¨å¤šäº†ï¼Œè‡ªç„¶è€Œç„¶å°±ä¼šçŸ¥é“ä»€ä¹ˆæ—¶å€™è¯¥ç”¨ä¸ŠçŠ¶æ€ç®¡ç†ï¼Œä»€ä¹ˆæ—¶å€™ä¸éœ€è¦ã€‚è€è¯è¯´çš„å¥½ç†Ÿèƒ½ç”Ÿå·§ï¼Œä½ è®¤ä¸ºå‘¢ï¼Ÿ<br>ï¼ˆæ‹¬å¼§ â€“ å…ˆäº†è§£å¥½Vuex ä¸€äº›åŸºæœ¬æ¦‚å¿µï¼Œç„¶ååœ¨<strong>è‡ªå·±çš„é¡¹ç›®</strong>ä¸­ä½¿ç”¨è¿‡åï¼Œå†ç”¨åˆ°ä½ å…¬å¸é¡¹ç›®ä¸Šï¼Œä½ åˆ«è¿™ä¹ˆè™ä¸€ä¸Šæ¥å°±ç»™ç”¨ä¸Šå»äº†ï½ï¼‰</p>
</blockquote>
<h2 id="Vuex-åŸºæœ¬ä½¿ç”¨ç¯‡"><a href="#Vuex-åŸºæœ¬ä½¿ç”¨ç¯‡" class="headerlink" title="Vuex åŸºæœ¬ä½¿ç”¨ç¯‡"></a>Vuex åŸºæœ¬ä½¿ç”¨ç¯‡</h2><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i vuex -S</span><br></pre></td></tr></table></figure>
<p>é¡¹ç›®å…¨å±€ä¸­ä»»ä½•åœ°æ–¹ä½¿ç”¨ Vuex, éœ€è¦å°† Vuex æ³¨å†Œåˆ° Vue å®ä¾‹ä¸­ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br></pre></td></tr></table></figure>
<h3 id="Vuex-ä¸Šè½¦å‰çš„ä¸€ä¸ªğŸŒ°"><a href="#Vuex-ä¸Šè½¦å‰çš„ä¸€ä¸ªğŸŒ°" class="headerlink" title="Vuex ä¸Šè½¦å‰çš„ä¸€ä¸ªğŸŒ°"></a>Vuex ä¸Šè½¦å‰çš„ä¸€ä¸ªğŸŒ°</h3><p>ä¸Šè½¦è§„åˆ™ï¼š</p>
<ol>
<li>æ¯ä¸€ä¸ª Vuex åº”ç”¨çš„æ ¸å¿ƒå°±æ˜¯ storeï¼ˆä»“åº“ï¼‰ï¼Œä¸€ä¸ªé¡¹ç›®ä¸­å¿…é¡»åªæœ‰ä¸€ä¸ª store å®ä¾‹ã€‚åŒ…å«ç€ä½ çš„åº”ç”¨ä¸­å¤§éƒ¨åˆ†çš„çŠ¶æ€ (state)ã€‚</li>
<li><p>ä¸èƒ½ç›´æ¥æ”¹å˜ store ä¸­çš„çŠ¶æ€ã€‚æ”¹å˜ store ä¸­çš„çŠ¶æ€çš„å”¯ä¸€é€”å¾„å°±æ˜¯æ˜¾å¼åœ°æäº¤ (commit) mutationã€‚</p>
<p>Vuex å’Œå•çº¯çš„å…¨å±€å¯¹è±¡æœ‰ä»¥ä¸‹ä¸¤ç‚¹ä¸åŒï¼š<br>ï¼ˆ1ï¼‰ Vuex çš„çŠ¶æ€å­˜å‚¨æ˜¯å“åº”å¼çš„ã€‚Vue ç»„ä»¶ä» store ä¸­è¯»å–çŠ¶æ€çš„æ—¶å€™ï¼Œè‹¥ store ä¸­çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆç›¸åº”çš„ç»„ä»¶ä¹Ÿä¼šç›¸åº”åœ°å¾—åˆ°é«˜æ•ˆæ›´æ–°ã€‚<br>ï¼ˆ2ï¼‰ä¸èƒ½ç›´æ¥æ”¹å˜ store ä¸­çš„çŠ¶æ€ã€‚ï¼ˆé‡è¦çš„äº‹æƒ…å¤šæ¥ä¸€éï¼‰</p>
</li>
</ol>
<p><strong>ä¸ŠğŸŒ°ï¼š</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; count &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"increment"</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"decrement"</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vuex) <span class="comment">// Vuex æ³¨å†Œåˆ° Vue ä¸­</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ª store</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  <span class="comment">// åˆå§‹åŒ– state</span></span><br><span class="line">  state: &#123;</span><br><span class="line">    count: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line"> <span class="comment">// æ”¹å˜çŠ¶æ€å”¯ä¸€å£°æ˜å¤„</span></span><br><span class="line">  mutations: &#123;</span><br><span class="line">  	increment: <span class="function"><span class="params">state</span> =&gt;</span> state.count++,</span><br><span class="line">    decrement: <span class="function"><span class="params">state</span> =&gt;</span> state.count--</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  <span class="comment">// ä»æ ¹ç»„ä»¶å°† store çš„å®ä¾‹æ³¨å…¥åˆ°æ‰€æœ‰çš„å­ç»„ä»¶</span></span><br><span class="line">  store,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    count () &#123;</span><br><span class="line">        <span class="comment">// Vuex çš„çŠ¶æ€å­˜å‚¨æ˜¯å“åº”å¼çš„ï¼Œä» store å®ä¾‹ä¸­è¯»å–çŠ¶æ€æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯åœ¨è®¡ç®—å±æ€§ä¸­è¿”å›æŸä¸ªçŠ¶æ€,</span></span><br><span class="line">        <span class="comment">// æ¯å½“çŠ¶æ€ count å‘ç”Ÿå˜åŒ–ï¼Œéƒ½ä¼šé‡æ–°æ±‚å–è®¡ç®—</span></span><br><span class="line">	    <span class="keyword">return</span> <span class="keyword">this</span>.$store.state.count</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    increment () &#123;</span><br><span class="line">      <span class="keyword">this</span>.$store.commit(<span class="string">'increment'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    decrement () &#123;</span><br><span class="line">    	<span class="keyword">this</span>.$store.commit(<span class="string">'decrement'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p> <code>state</code> ä¸€ä¸ªå¯¹è±¡ç®¡ç†åº”ç”¨çš„æ‰€æœ‰çŠ¶æ€ï¼Œå”¯ä¸€æ•°æ®æºï¼ˆSSOT, Single source of truthï¼‰ï¼Œå¿…é¡»å‰æœŸåˆå§‹åŒ–å°±å®šä¹‰å¥½ï¼Œä¸ç„¶åé¢åœ¨æ¥ä¿®æ”¹è®¾ç½®  <code>state</code>ï¼Œç¨‹åºå°±ä¸ä¼šæ•è·åˆ° <code>mutations(çªå˜çš„æ„æ€)</code> æ‰€ä»¥æ•°æ®ä¹Ÿå°±ä¸ä¼šåˆä»»ä½•çš„æ›´æ–°ï¼Œç»„ä»¶ä¸Šä¹Ÿæ— æ³•ä½“ç°å‡ºæ¥ã€‚</p>
<p>è·å– store ç®¡ç†çš„çŠ¶æ€ï¼Œ å› ä¸ºåœ¨ Vue å®ä¾‹åŒ–çš„æ—¶å€™å°† Vuex store å¯¹è±¡ æ³¨å…¥äº†è¿›æ¥ ï¼Œæ‰€ä»¥ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥é€šè¿‡ <code>this.$store</code> è·å–åˆ° store, <code>this.$store.state</code> æ¥è·å–çŠ¶æ€å¯¹è±¡ï¼Œ <code>this.$store.commit</code> æ¥è§¦å‘ä¹‹å‰å®šä¹‰å¥½çš„ mutations ä¸­çš„æ–¹æ³•</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$store.state(<span class="string">'count'</span>) <span class="comment">// =&gt; 0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.$store.commit(<span class="string">'increment'</span>) <span class="comment">// =&gt; 1</span></span><br></pre></td></tr></table></figure>
<p>é€šè¿‡æäº¤ <code>mutation</code> çš„æ–¹å¼ï¼Œè€Œéç›´æ¥æ”¹å˜ <code>store.state.count</code>,  ä½¿ç”¨ <code>commit</code> æ–¹å¼å¯ä»¥è®© Vuex æ˜ç¡®åœ°è¿½è¸ªåˆ°çŠ¶æ€çš„å˜åŒ–ï¼Œåˆ©äºåæœŸç»´æŠ¤å’Œè°ƒè¯•ã€‚</p>
<p>é€šè¿‡äº†è§£ <code>state</code> ï¼ˆçŠ¶æ€ï¼Œæ•°æ®ï¼‰å’Œ <code>mutations</code> ï¼ˆä¿®æ”¹æ•°æ®å”¯ä¸€å£°æ˜çš„åœ°æ–¹ï¼Œç±»ä¼¼ SQL è¯­å¥ï¼‰çŸ¥é“äº† Vuex æœ€é‡è¦çš„æ ¸å¿ƒä¸¤éƒ¨åˆ†ï¼Œç„¶åé€šè¿‡æŒæ¡ gttterã€actionã€module æ¥è®© Vuex æ›´åŠ çš„å·¥ç¨‹åŒ–ã€åˆç†åŒ–æ¥é€‚åº”æ›´å¤§å‹çš„é¡¹ç›®çš„çŠ¶æ€ç®¡ç†ã€‚</p>
<h3 id="mapState-è¾…åŠ©å‡½æ•°"><a href="#mapState-è¾…åŠ©å‡½æ•°" class="headerlink" title="mapState è¾…åŠ©å‡½æ•°"></a>mapState è¾…åŠ©å‡½æ•°</h3><p><code>mapState</code>  å¯ä»¥å¹²ä»€ä¹ˆå‘¢ï¼Ÿå­—é¢æ„æ€<strong>çŠ¶æ€æ˜ å°„</strong>ï¼Œé€šè¿‡ <code>mapState</code> å¯ä»¥æ›´åŠ å¿«æ·æ–¹ä¾¿å¸®æˆ‘ä»¬ç”Ÿæˆè®¡ç®—å±æ€§ï¼Œæ‹¿ä¸Šé¢çš„ä¾‹å­è¿›è¡Œæ¼”ç¤ºï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"> computed: &#123;</span><br><span class="line">    count () &#123;</span><br><span class="line">	    <span class="keyword">return</span> <span class="keyword">this</span>.$store.state.count</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ mapState</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">'vuex'</span> <span class="comment">// éœ€è¦å…ˆå¯¼å…¥</span></span><br><span class="line"></span><br><span class="line">computed: mapState([</span><br><span class="line">    <span class="comment">// ç®­å¤´å‡½æ•°æ–¹å¼</span></span><br><span class="line">	count: <span class="function"><span class="params">state</span> =&gt;</span> state.count ,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// or ä¼ å­—ç¬¦ä¸²å‚æ•°æ–¹å¼, 'count' ç­‰åŒäº state =&gt; state.count</span></span><br><span class="line">    countAlias: <span class="string">'count'</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–çŠ¶æ€åï¼Œä½ è¿˜éœ€è¦å’Œå½“å‰ç»„ä»¶åˆ«çš„å±æ€§å€¼æ—¶,å°±å¿…é¡»ä½¿ç”¨å¸¸è§„å‡½æ•°çš„å†™æ³•äº†, åªæœ‰è¿™æ ·æ‰èƒ½è·å–åˆ°å½“å‰ç»„ä»¶çš„ this</span></span><br><span class="line">    countPlusLocalState (state) &#123;</span><br><span class="line">    	<span class="keyword">return</span> state.count + <span class="keyword">this</span>.localCount</span><br><span class="line">    &#125;</span><br><span class="line">])</span><br></pre></td></tr></table></figure>
<p>å½“å‰è®¡ç®—å±æ€§åç§°å’ŒçŠ¶æ€åç§°ç›¸åŒæ—¶ï¼Œå¯ä»¥ä¼ é€’ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">computed: mapState([</span><br><span class="line">    <span class="comment">// æ˜ å°„ `this.count` ä¸º `this.$store.state.count`</span></span><br><span class="line">	<span class="string">'count'</span></span><br><span class="line">])</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šä½¿ç”¨ <code>mapState</code> è¾…åŠ©å‡½æ•°åï¼Œæ•´ä¸ª <code>computed</code> è®¡ç®—å±æ€§éƒ½æˆäº† <code>state</code> çŠ¶æ€ç®¡ç†èšé›†åœ°äº†ï¼Œ ç»„ä»¶é‡Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„è®¡ç®—å±æ€§éƒ½éœ€è¦è¢«çŠ¶æ€ç®¡ç†åŒ–ï¼Œè¿˜æ˜¯æœ‰å¾ˆå¤šè®¡ç®—å±æ€§æ˜¯ä¸éœ€è¦çŠ¶æ€ç®¡ç†çš„æ•°æ®çš„ï¼Œé‚£å¦‚ä½•å°†å®ƒä¸å±€éƒ¨è®¡ç®—å±æ€§æ··åˆä½¿ç”¨å‘¢ï¼Ÿ</p>
<p>å› ä¸º <code>mapState</code> å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚æ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨å¯¹è±¡æ‰©å±•è¿ç®—ç¬¦å°±å¯ä»¥æŠŠå±€éƒ¨è®¡ç®—å±æ€§å’Œ <code>mapState</code> å‡½æ•°è¿”å›çš„å¯¹è±¡èåˆäº†ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">	...mapState(&#123;</span><br><span class="line">		count: <span class="function"><span class="params">state</span> =&gt;</span> state.count</span><br><span class="line">    &#125;),</span><br><span class="line"></span><br><span class="line">   localComputed () &#123;</span><br><span class="line">   	   <span class="comment">/* ... */</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼š<br> å¯¹è±¡æ‰©å±•è¿ç®—ç¬¦ï¼Œç°å¤„äº ECMASCript ææ¡ˆ stage-4 é˜¶æ®µï¼ˆå°†è¢«æ·»åŠ åˆ°ä¸‹ä¸€å¹´åº¦å‘å¸ƒï¼‰ï¼Œæ‰€ä»¥é¡¹ç›®ä¸­è¦ä½¿ç”¨éœ€è¦å®‰è£… <a href="https://www.babeljs.cn/docs/plugins/transform-object-rest-spread/" target="_blank" rel="noopener">babel-plugin-transform-object-rest-spread</a> æ’ä»¶ æˆ– å®‰è£… presets ç¯å¢ƒä¸º stage ä¸º 1çš„ env ç‰ˆæœ¬ <a href="https://www.babeljs.cn/docs/plugins/preset-stage-1/" target="_blank" rel="noopener">babel-preset-stage-1</a> å’Œä¿®æ”¹ babelrc é…ç½®æ–‡ä»¶</p>
</blockquote>
<p><code>.babelrc</code></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"presets"</span>: [</span><br><span class="line">        <span class="string">"env"</span>,</span><br><span class="line">        <span class="string">"stage-1"</span> // æ·»åŠ æ­¤é¡¹</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"plugins"</span>: [</span><br><span class="line">        <span class="string">"transform-vue-jsx"</span>,</span><br><span class="line">        <span class="string">"syntax-dynamic-import"</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ ¸å¿ƒæ¦‚å¿µ"><a href="#æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="æ ¸å¿ƒæ¦‚å¿µ"></a>æ ¸å¿ƒæ¦‚å¿µ</h2><blockquote>
<p>ä¸Šé¢ä»¥è®²è¿°è¿‡ state äº†ï¼Œè¿™é‡Œå°±ä¸è¿‡å¤šçš„è¯´æ˜ã€‚</p>
</blockquote>
<h3 id="Getter"><a href="#Getter" class="headerlink" title="Getter"></a>Getter</h3><p><code>Getter</code> å°±æ˜¯ <code>Store</code> çŠ¶æ€ç®¡ç†å±‚ä¸­çš„è®¡ç®—å±æ€§ï¼Œè·å–æº <code>State</code> åï¼Œå¸Œæœ›åœ¨å¯¹å…¶è¿›è¡Œä¸€äº›åŒ…è£…ï¼Œå†è¿”å›ç»™ç»„ä»¶ä¸­ä½¿ç”¨ã€‚ä¹Ÿæ˜¯å°±å°†ç›´æ¥è·å–åˆ° <code>State</code> ååœ¨ <code>computed</code> é‡Œè¿›è¡Œå†æ¬¡çš„è¿‡æ»¤ã€åŒ…è£…é€»è¾‘ç»Ÿç»Ÿæå–å‡ºæ”¾åˆ° <code>Getter</code> é‡Œè¿›è¡Œï¼Œæé«˜äº†ä»£ç çš„å¤ç”¨æ€§ã€å¯è¯»æ€§ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  doneTodosCount () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.$store.state.todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.done).length</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æå–åˆ° <code>Getter</code>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    todos: [</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'...'</span>, <span class="attr">done</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">'...'</span>, <span class="attr">done</span>: <span class="literal">false</span> &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//  `Getter` é»˜è®¤ç¬¬ä¸€ä¸ªå‚æ•°ä¸º `state`:</span></span><br><span class="line">  getters: &#123;</span><br><span class="line">    doneTodos: <span class="function"><span class="params">state</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> state.todos.filter( <span class="function"><span class="params">todo</span> =&gt;</span> todo.done )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//  ç»„ä»¶ä¸­è·å–ï¼Œé€šè¿‡å±æ€§è®¿é—®</span></span><br><span class="line"></span><br><span class="line">computed: &#123;</span><br><span class="line">	doneTodosCount () &#123;</span><br><span class="line">    	<span class="keyword">return</span> <span class="keyword">this</span>.$store.getters.doneTodos.length</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼š getter åœ¨é€šè¿‡å±æ€§è®¿é—®æ—¶æ˜¯ä½œä¸º Vue çš„å“åº”å¼ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†è¿›è¡Œç¼“å­˜ã€‚</p>
</blockquote>
<p><strong>Getter è¿˜æ¥å—å…¶ä»– getter ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    todos: [</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'...'</span>, <span class="attr">done</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">'...'</span>, <span class="attr">done</span>: <span class="literal">false</span> &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;</span><br><span class="line">    doneTodos: <span class="function"><span class="params">state</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> state.todos.filter( <span class="function"><span class="params">todo</span> =&gt;</span> todo.done )</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// ç¬¬äºŒä¸ªå‚æ•°ä¸º getters</span></span><br><span class="line">    doneTodosLength: <span class="function">(<span class="params">state, getters</span>) =&gt;</span> &#123;</span><br><span class="line">    	<span class="keyword">return</span> getters.doneTodos.length</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>è¿˜å¯ä»¥é€šè¿‡ç»™ Getter ä¼ é€’å‚æ•°è·å–ç‰¹å®šçš„æ•°æ®</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">getters: &#123;</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">    getTodoById: <span class="function"><span class="params">state</span> =&gt;</span> id =&gt; &#123;</span><br><span class="line">    	<span class="keyword">return</span> state.todos.find( <span class="function"><span class="params">todo</span> =&gt;</span> todo.id === id )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»„ä»¶å†…è°ƒç”¨æ–¹å¼<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">this</span>.$store.getters.getTodoById(<span class="number">2</span>) <span class="comment">// =&gt; &#123; id: 2, text: '...', done: false &#125;</span></span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼šgetter åœ¨é€šè¿‡æ–¹æ³•è®¿é—®æ—¶ï¼Œæ¯æ¬¡éƒ½ä¼šå»è¿›è¡Œè°ƒç”¨ï¼Œè€Œä¸ä¼šç¼“å­˜ç»“æœã€‚</p>
</blockquote>
<h4 id="mapGetters-è¾…åŠ©å‡½æ•°"><a href="#mapGetters-è¾…åŠ©å‡½æ•°" class="headerlink" title="mapGetters è¾…åŠ©å‡½æ•°"></a>mapGetters è¾…åŠ©å‡½æ•°</h4><p>å’Œå‰é¢ <code>mapState</code> è¾…åŠ©å‡½æ•°ä½œç”¨å’Œä½¿ç”¨ä¸ŠåŸºæœ¬ç›¸åŒã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// getter åç§°å’Œ è®¡ç®—å±æ€§åç§°ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä¼ é€’å­—ç¬¦ä¸²æ•°ç»„</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  computed: &#123;</span><br><span class="line">  	...mapGetters([</span><br><span class="line">    	<span class="string">'doneTodos'</span></span><br><span class="line">    ])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼ é€’å¯¹è±¡çš„æ–¹å¼</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  computed: &#123;</span><br><span class="line">  	...mapGetters(&#123;</span><br><span class="line">    	doneTodos: <span class="string">'doneTodos'</span>,</span><br><span class="line">        getTodoById: <span class="string">'getTodoById'</span> <span class="comment">// æ­¤å¤„ä¼ é€’å›æ¥çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨çš„æ—¶å€™ =&gt; &#123;&#123; getTodoById(2) &#125;&#125;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Mutation"><a href="#Mutation" class="headerlink" title="Mutation"></a>Mutation</h3><p><strong>ä¸èƒ½ç›´æ¥ä¿®æ”¹çŠ¶æ€ï¼Œéœ€è¦é€šè¿‡ Vuex store ä¸­å£°æ˜çš„ Mutations é‡Œçš„æ–¹æ³•ä¿®æ”¹çŠ¶æ€ã€‚</strong> æ›´æ”¹ Vuex çš„ store ä¸­çš„çŠ¶æ€çš„å”¯ä¸€æ–¹æ³•æ˜¯æäº¤ <code>mutation</code>ã€‚<code>mutation</code> æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œ å«æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²çš„ <strong>äº‹ä»¶ç±»å‹ (type)</strong> å’Œ ä¸€ä¸ª <strong>å›è°ƒå‡½æ•° (handler)</strong>ã€‚<br>å›è°ƒå‡½æ•°å°±æ˜¯æˆ‘ä»¬å®é™…è¿›è¡ŒçŠ¶æ€æ›´æ”¹çš„åœ°æ–¹ï¼Œé»˜è®¤æ¥å— state ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    count: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    <span class="comment">// increment äº‹ä»¶ç±»å‹ï¼ˆtypeï¼‰åç§°ï¼Œincrement() å›è°ƒå‡½æ•°</span></span><br><span class="line">    <span class="comment">// increment: function (state) &#123;&#125;  åŸæœ¬å†™æ³•</span></span><br><span class="line">    increment (state) &#123;</span><br><span class="line">      <span class="comment">// å˜æ›´çŠ¶æ€</span></span><br><span class="line">      state.count++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>mutation handler</code> ä¸èƒ½è¢«ç›´æ¥è°ƒç”¨ï¼Œéœ€è¦é€šè¿‡ <code>store.commit()</code> æ¥é€šçŸ¥æˆ‘éœ€è¦è§¦å‘ä¸€ä¸ª <code>mutation handler</code>ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$store.commit(<span class="string">'increment'</span>)</span><br></pre></td></tr></table></figure>
<p><code>mutation</code> æ¥æ”¶å‚æ•°å¿…é¡»åªèƒ½ä¸¤ä¸ªï¼Œè¶…å‡ºçš„éƒ½æ— æ³•è·å–ï¼›ç¬¬äºŒä¸ªå‚æ•°æ¨èä¼ é€’çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ¥æ¥æ”¶æ›´å¤šçš„ä¿¡æ¯ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$store.commit(<span class="string">'increment'</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.$store.commit(<span class="string">'increment'</span>, &#123; <span class="attr">num</span>: <span class="number">10</span> &#125;)</span><br></pre></td></tr></table></figure>
<p><strong>å¯¹è±¡é£æ ¼çš„æäº¤æ–¹å¼</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$store.commit(&#123;</span><br><span class="line">	type: <span class="string">'increment'</span>,</span><br><span class="line">    num: <span class="number">10</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="Mutation-éœ€è¦éµå®ˆ-Vue-çš„å“åº”è§„åˆ™"><a href="#Mutation-éœ€è¦éµå®ˆ-Vue-çš„å“åº”è§„åˆ™" class="headerlink" title="Mutation éœ€è¦éµå®ˆ Vue çš„å“åº”è§„åˆ™"></a>Mutation éœ€è¦éµå®ˆ Vue çš„å“åº”è§„åˆ™</h4><p> Vuex çš„ store ä¸­çš„çŠ¶æ€æ˜¯å“åº”å¼çš„ï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬å˜æ›´çŠ¶æ€æ—¶ï¼Œç›‘è§†çŠ¶æ€çš„ Vue ç»„ä»¶ä¹Ÿä¼šè‡ªåŠ¨æ›´æ–°ã€‚è¿™ä¹Ÿæ„å‘³ç€ Vuex ä¸­çš„ mutation ä¹Ÿéœ€è¦ä¸ä½¿ç”¨ Vue ä¸€æ ·éµå®ˆä¸€äº›æ³¨æ„äº‹é¡¹ï¼š</p>
<ol>
<li>æœ€å¥½æå‰åœ¨ä½ çš„ store ä¸­åˆå§‹åŒ–å¥½æ‰€æœ‰æ‰€éœ€å±æ€§ï¼ˆstate ä¸­çš„å±æ€§ï¼‰ã€‚</li>
<li>å½“éœ€è¦åœ¨å¯¹è±¡ä¸Šæ·»åŠ æ–°å±æ€§æ—¶ï¼Œä½ åº”è¯¥è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°å¯¹è±¡<pre><code>* ä½¿ç”¨ Vue.set(obj, &apos;newProp&apos;, 123)ï¼Œæˆ–è€…
* ä»¥æ–°å¯¹è±¡æ›¿æ¢è€å¯¹è±¡ã€‚ä¾‹å¦‚ï¼š `Object.assgin({}, state.obj, newProps)` ã€å¯¹è±¡æ‰©å±•è¿ç®—ç¬¦ `state.obj = {...state.obj, newProp: 123 }`
</code></pre></li>
</ol>
<h4 id="mapMutation-è¾…åŠ©å‡½æ•°"><a href="#mapMutation-è¾…åŠ©å‡½æ•°" class="headerlink" title="mapMutation è¾…åŠ©å‡½æ•°"></a>mapMutation è¾…åŠ©å‡½æ•°</h4><p>ä½¿ç”¨æ–¹å¼è·Ÿ <code>mapState</code> å’Œ <code>mapGetters</code> åŸºæœ¬ç›¸åŒã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapMutations &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="comment">// ä¼ é€’å­—ç¬¦ä¸²æ•°ç»„ï¼ŒåŒåå“¦ï½</span></span><br><span class="line">    ...mapMutations([</span><br><span class="line">      <span class="string">'increment'</span>, <span class="comment">// å°† `this.increment()` æ˜ å°„ä¸º `this.$store.commit('increment')`</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// `mapMutations` ä¹Ÿæ”¯æŒè½½è·ï¼š</span></span><br><span class="line">      <span class="string">'incrementBy'</span> <span class="comment">// å°† `this.incrementBy(amount)` æ˜ å°„ä¸º `this.$store.commit('incrementBy', amount)`</span></span><br><span class="line">    ]),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¼ é€’å¯¹è±¡</span></span><br><span class="line">    ...mapMutations(&#123;</span><br><span class="line">      add: <span class="string">'increment'</span> <span class="comment">// å°† `this.add()` æ˜ å°„ä¸º `this.$store.commit('increment')`</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨æ–¹å¼å°±è·Ÿ <code>methods</code> å…¶ä»–æ™®é€šæ–¹æ³•ä¸€æ ·ï¼Œé€šè¿‡ <code>this.&lt;methodName&gt;</code> æ¥è°ƒç”¨ã€‚</p>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼š<br><strong>mutation å¿…é¡»æ˜¯åŒæ­¥å‡½æ•°</strong>ï¼Œä¿®æ”¹ state å¿…é¡»æ˜¯åŒæ­¥çš„ã€åŒæ­¥çš„ã€åŒæ­¥çš„ã€‚<br>å¦‚æœæ˜¯å¼‚æ­¥çš„ï¼Œå½“è§¦å‘ mutation çš„æ—¶å€™ï¼Œå†…éƒ¨çš„å›è°ƒå‡½æ•°è¿˜æ²¡æœ‰è¢«è°ƒç”¨ï¼Œæ ¹æœ¬ä¸çŸ¥é“å®é™…æ‰§è¡Œåœ¨ä½•å¤„ï¼Œå¾ˆéš¾è¿½è¸ªèµ·é—®é¢˜ã€‚ï¼ˆå®è´¨ä¸Šä»»ä½•åœ¨å›è°ƒå‡½æ•°ä¸­è¿›è¡Œçš„çŠ¶æ€çš„æ”¹å˜éƒ½æ˜¯ä¸å¯è¿½è¸ªçš„ã€‚<br>Vuex ä¹Ÿæä¾›äº†å¼‚æ­¥æ“ä½œçš„è§£å†³æ–¹æ¡ˆï¼Œ éœ€è¦å°†å¼‚æ­¥æ“ä½œæå–å‡ºæ¥æ”¾å…¥åˆ° Action é‡Œè¿›è¡Œæ“ä½œã€‚è€Œ Mutation åªè´Ÿè´£<strong>åŒæ­¥äº‹åŠ¡</strong>ã€‚</p>
</blockquote>
<h3 id="Action"><a href="#Action" class="headerlink" title="Action"></a>Action</h3><p>åœ¨ä¹‹å‰ä¹Ÿè®²è¿°äº†ï¼ŒAction æ˜¯ç”¨æ¥å¤„ç†å¼‚æ­¥æ“ä½œçš„ã€‚è¿™é‡Œåœ¨è¯¦ç»†è¯´æ˜ä¸€ä¸‹ Action çš„åŸºæœ¬ä½¿ç”¨ã€‚</p>
<p>Action ç±»ä¼¼äº mutationï¼Œ ä¸åŒåœ¨äº:</p>
<ul>
<li>Action æäº¤çš„æ˜¯ mutationï¼Œè€Œä¸æ˜¯ç›´æ¥å˜æ›´çŠ¶æ€ã€‚(ä¸ç›´æ¥ä¿®æ”¹çŠ¶æ€ï¼Œä¿®æ”¹çŠ¶æ€è¿˜æ˜¯éœ€è¦é€šè¿‡ mutation)</li>
<li>Action å¯ä»¥åŒ…å«ä»»æ„å¼‚æ­¥æ“ä½œã€‚</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    count: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    increment (state) &#123;</span><br><span class="line">      state.count++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">     <span class="comment">// å®è·µä¸­ï¼Œç»å¸¸ç”¨åˆ°å‚æ•°è§£æ„æ¥ç®€åŒ–ä»£ç ï¼Œ increment (&#123;commit&#125;) &#123; commit('') &#125;</span></span><br><span class="line">    increment (context) &#123;</span><br><span class="line">      context.commit(<span class="string">'increment'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Action å‡½æ•°æ¥å—ä¸€ä¸ªä¸ store å®ä¾‹å…·æœ‰ç›¸åŒæ–¹æ³•å’Œå±æ€§çš„ context å¯¹è±¡ï¼ˆå¹¶ä¸æ˜¯çœŸæ­£çš„ store æœ¬èº«ï¼‰ï¼Œå› æ­¤å¯ä»¥è°ƒç”¨ <code>store.commit</code> è¿›è¡Œæäº¤ mutationï¼Œ æˆ–è€…é€šè¿‡ <code>context.state</code> å’Œ <code>context.getters</code> æ¥è·å– <code>state</code> å’Œ <code>getters</code>ã€‚</p>
<p><strong>è§¦å‘Action</strong></p>
<p>Action é€šè¿‡ <code>store.dispatch</code> æ–¹æ³•è§¦å‘ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$store.dispatch(<span class="string">'increment'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¼ é€’é¢å¤–å‚æ•°åˆ†å‘</span></span><br><span class="line">store.dispatch(<span class="string">'incrementAsync'</span>, &#123;</span><br><span class="line">  amount: <span class="number">10</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥å¯¹è±¡å½¢å¼åˆ†å‘</span></span><br><span class="line">store.dispatch(&#123;</span><br><span class="line">  type: <span class="string">'incrementAsync'</span>,</span><br><span class="line">  amount: <span class="number">10</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>ä¸æœåŠ¡å™¨æ•°æ®å¼‚æ­¥è¯·æ±‚åŸºæœ¬åœ¨ Action é‡Œè¿›è¡Œï¼Œ ç„¶åé€šè¿‡ Mutation æ¥åŒæ­¥åº”ç”¨çŠ¶æ€<code>state</code></p>
<h4 id="mapAction-è¾…åŠ©å‡½æ•°"><a href="#mapAction-è¾…åŠ©å‡½æ•°" class="headerlink" title="mapAction è¾…åŠ©å‡½æ•°"></a>mapAction è¾…åŠ©å‡½æ•°</h4><p>å’Œ <code>mapMutions</code> ä½¿ç”¨æ–¹å¼åŸºæœ¬ä¸€è‡´ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapActions &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    ...mapActions([</span><br><span class="line">      <span class="string">'increment'</span>, <span class="comment">// å°† `this.increment()` æ˜ å°„ä¸º `this.$store.dispatch('increment')`</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// `mapActions` ä¹Ÿæ”¯æŒè½½è·ï¼š</span></span><br><span class="line">      <span class="string">'incrementBy'</span> <span class="comment">// å°† `this.incrementBy(amount)` æ˜ å°„ä¸º `this.$store.dispatch('incrementBy', amount)`</span></span><br><span class="line">    ]),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¼ é€’å¯¹è±¡</span></span><br><span class="line">    ...mapActions(&#123;</span><br><span class="line">      add: <span class="string">'increment'</span> <span class="comment">// å°† `this.add()` æ˜ å°„ä¸º `this.$store.dispatch('increment')`</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ç»„åˆ-Action"><a href="#ç»„åˆ-Action" class="headerlink" title="ç»„åˆ Action"></a>ç»„åˆ Action</h4><p>Action é€šå¸¸æ˜¯å¼‚æ­¥çš„ï¼Œé‚£ä¹ˆå¦‚ä½•çŸ¥é“ action ä»€ä¹ˆæ—¶å€™ç»“æŸå‘¢ï¼Ÿæ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬å¦‚ä½•æ‰èƒ½ç»„åˆå¤šä¸ª actionï¼Œä»¥å¤„ç†æ›´åŠ å¤æ‚çš„å¼‚æ­¥æµç¨‹ï¼Ÿ</p>
<p>é€šè¿‡è¿”å›ä¸€ä¸ª Promise å¯¹è±¡æ¥è¿›è¡Œç»„åˆå¤šä¸ª Actionã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">actions: &#123;</span><br><span class="line">  actionA (&#123; commit &#125;) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        commit(<span class="string">'someMutation'</span>)</span><br><span class="line">        resolve()</span><br><span class="line">      &#125;, <span class="number">1000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">store.dispatch(<span class="string">'actionA'</span>).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>åˆ©ç”¨ <code>async / await</code>ï¼Œæˆ‘ä»¬å¯ä»¥å¦‚ä¸‹ç»„åˆ actionï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// å‡è®¾ getData() å’Œ getOtherData() è¿”å›çš„æ˜¯ Promise</span></span><br><span class="line"></span><br><span class="line">actions: &#123;</span><br><span class="line">  <span class="keyword">async</span> actionA (&#123; commit &#125;) &#123;</span><br><span class="line">    commit(<span class="string">'gotData'</span>, <span class="keyword">await</span> getData())</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">async</span> actionB (&#123; dispatch, commit &#125;) &#123;</span><br><span class="line">    <span class="keyword">await</span> dispatch(<span class="string">'actionA'</span>) <span class="comment">// ç­‰å¾… actionA å®Œæˆ</span></span><br><span class="line">    commit(<span class="string">'gotOtherData'</span>, <span class="keyword">await</span> getOtherData())</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Module"><a href="#Module" class="headerlink" title="Module"></a>Module</h3><p>ç”±äº Vuex ä½¿ç”¨<strong>å•ä¸€çŠ¶æ€æ ‘</strong>æ¨¡å¼ï¼Œæ¥ç»Ÿä¸€ç®¡ç†åº”ç”¨æ‰€æœ‰çš„çŠ¶æ€ï¼Œå¯¼è‡´æ‰€æœ‰çŠ¶æ€ä¼šé›†ä¸­åˆ°ä¸€ä¸ªæ¯”è¾ƒå¤§çš„å¯¹è±¡ï¼Œéšç€åç»­ä¸æ–­å¾—è¿­ä»£ï¼Œè¿™ä¸ªå¯¹è±¡å°±ä¼šè¶Šæ¥è¶Šåºå¤§ï¼ŒåæœŸçš„ä»£ç å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§å°±ä¼šä¸æ–­åŠ å¤§ã€‚</p>
<p>è§£å†³ä»¥ä¸Šé—®é¢˜ï¼Œå°±éœ€è¦å¯¹è¿™ä¸ªå¯¹è±¡çš„å†…éƒ¨è¿›è¡Œæ‹†åˆ†å’Œç»†åˆ†åŒ–ï¼Œå¯¹çŠ¶æ€è¿›è¡Œåˆ†é—¨åˆ«ç±»ï¼Œä¹Ÿå°±äº§ç”Ÿäº†<strong>æ¨¡å—ï¼ˆmoduleï¼‰</strong> è¿™ä¸ªæ¦‚å¿µã€‚æ¯ä¸ªæ¨¡å—æ‹¥æœ‰è‡ªå·±çš„ stateã€mutationã€actionã€getterã€ç”šè‡³æ˜¯åµŒå¥—å­æ¨¡å—â€”â€”ä»ä¸Šè‡³ä¸‹è¿›è¡ŒåŒæ ·æ–¹å¼çš„åˆ†å‰²ï¼Œå°†åºå¤§çš„ç³»ç»Ÿè¿›è¡Œåˆç†æœ‰æ•ˆçš„èŒèƒ½åˆ’åˆ†ï¼Œéµå¾ªå•ä¸€èŒè´£çš„ç†å¿µï¼Œæ¯ä¸ªæ¨¡å—æ¸…æ™°æ˜äº†çš„è‡ªå·±çš„èŒè´£å’ŒèŒèƒ½ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> moduleA = &#123;</span><br><span class="line">  state: &#123; ... &#125;,</span><br><span class="line">  mutations: &#123; ... &#125;,</span><br><span class="line">  actions: &#123; ... &#125;,</span><br><span class="line">  getters: &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> moduleB = &#123;</span><br><span class="line">  state: &#123; ... &#125;,</span><br><span class="line">  mutations: &#123; ... &#125;,</span><br><span class="line">  actions: &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  modules: &#123;</span><br><span class="line">    a: moduleA,</span><br><span class="line">    b: moduleB</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">store.state.a <span class="comment">// -&gt; moduleA çš„çŠ¶æ€</span></span><br><span class="line">store.state.b <span class="comment">// -&gt; moduleB çš„çŠ¶æ€</span></span><br></pre></td></tr></table></figure>
<p>å£°æ˜æ¨¡å—åï¼Œstateã€mutationã€actionã€getter ç­‰ä½¿ç”¨æ–¹å¼ã€ä½œç”¨å’Œä¸åœ¨ <code>modules</code> å†…å£°æ˜æ–¹å¼åŸºæœ¬ä¸€æ ·ï¼Œåªæ˜¯åœ¨ç»†èŠ‚ä¸Šè¿›è¡Œäº†ä¸€äº›ç»†å¾®çš„æ”¹å˜ï¼Œæ¯”å¦‚ï¼š getter é‡Œé»˜è®¤æ¥æ”¶ä¸€ä¸ªå‚æ•° stateï¼Œæ¨¡å—é‡Œæ¥æ”¶ state å°±æ˜¯æœ¬èº«æ¨¡å—è‡ªå·±çš„ state çŠ¶æ€äº†ï¼Œè€Œä¸æ˜¯å…¨å±€çš„äº†ï¼› è°ƒç”¨è·å–ä¸Šä¹Ÿå¤šä¸€é“éœ€è¦å‘ŠçŸ¥é‚£ä¸ªæ¨¡å—è·å–çŠ¶æ€ ç­‰ä¸€äº›ç»†èŠ‚ä¸Šçš„å·®å¼‚ã€‚</p>
<h4 id="Module-é‡Œ-stateã€mutationã€actionã€getter-ä¸Šçš„ä¸€äº›å·®å¼‚"><a href="#Module-é‡Œ-stateã€mutationã€actionã€getter-ä¸Šçš„ä¸€äº›å·®å¼‚" class="headerlink" title="Module é‡Œ stateã€mutationã€actionã€getter ä¸Šçš„ä¸€äº›å·®å¼‚"></a>Module é‡Œ stateã€mutationã€actionã€getter ä¸Šçš„ä¸€äº›å·®å¼‚</h4><p>ï¼ˆ1ï¼‰æ¨¡å—å†…éƒ¨çš„ mutation å’Œ getterï¼Œæ¥æ”¶çš„ç¬¬ä¸€ä¸ªå‚æ•° <code>state</code> æ˜¯<strong>æ¨¡å—çš„å±€éƒ¨çŠ¶æ€å¯¹è±¡</strong>ã€‚<br>ï¼ˆ2ï¼‰æ¨¡å—å†…éƒ¨çš„ actionï¼Œå±€éƒ¨çŠ¶æ€é€šè¿‡ <code>context.state</code> æš´éœ²å‡ºæ¥ï¼Œæ ¹èŠ‚ç‚¹çŠ¶æ€åˆ™ä¸º <code>context.rootState</code><br>ï¼ˆ3ï¼‰æ¨¡å—å†…éƒ¨çš„ getterï¼Œæ ¹èŠ‚ç‚¹çŠ¶æ€ä¼šä½œä¸º<strong>ç¬¬ä¸‰ä¸ªå‚æ•°</strong>æš´éœ²å‡ºæ¥</p>
<h4 id="å‘½åç©ºé—´"><a href="#å‘½åç©ºé—´" class="headerlink" title="å‘½åç©ºé—´"></a>å‘½åç©ºé—´</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¨¡å—å†…éƒ¨çš„ actionã€mutation å’Œ getter æ˜¯<strong>æ³¨å†Œåœ¨å…¨å±€å‘½åç©ºé—´</strong>çš„â€”â€”è¿™æ ·ä½¿å¾—å¤šä¸ªæ¨¡å—èƒ½å¤Ÿå¯¹åŒä¸€ mutation æˆ– action ä½œå‡ºå“åº”ï¼Œæ‰€ä»¥å¿…é¡»é˜²æ­¢æ¨¡å—é‡Œå±æ€§æˆ–æ–¹æ³•é‡åã€‚</p>
<p>ä¸ºäº†æ¨¡å—å…·æœ‰æ›´é«˜çš„å°è£…åº¦ã€å¤ç”¨æ€§å’Œç‹¬ç«‹æ€§ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ  <code>namespaced: true</code> çš„æ–¹å¼ä½¿å…¶æˆä¸ºå¸¦å‘½åç©ºé—´çš„æ¨¡å—ã€‚åœ¨è°ƒç”¨ä¸Šä¹Ÿå°±éœ€è¦æ·»åŠ ä¸Šå£°æ˜ getterã€action åŠ mutation åˆ°åº•å±äºé‚£ä¸ªæ¨¡å—äº†ï¼Œä»¥è·¯å¾„çš„å½¢å¼è¡¨ç¤ºå±äºé‚£ä¸ªæ¨¡å—ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  modules: &#123;</span><br><span class="line">    account: &#123;</span><br><span class="line">      namespaced: <span class="literal">true</span>, <span class="comment">// å¼€å¯å‘½åç©ºé—´</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// æ¨¡å—å†…å®¹ï¼ˆmodule assetsï¼‰</span></span><br><span class="line">      state: &#123; ... &#125;, <span class="comment">// æ¨¡å—å†…çš„çŠ¶æ€å·²ç»æ˜¯åµŒå¥—çš„äº†ï¼Œä½¿ç”¨ `namespaced` å±æ€§ä¸ä¼šå¯¹å…¶äº§ç”Ÿå½±å“</span></span><br><span class="line">      getters: &#123;</span><br><span class="line">        isAdmin () &#123; ... &#125; <span class="comment">// -&gt; getters['account/isAdmin'] è°ƒç”¨æ—¶ä»¥è·¯å¾„çš„å½¢å¼è¡¨æ˜å½’å±</span></span><br><span class="line">      &#125;,</span><br><span class="line">      actions: &#123;</span><br><span class="line">        login () &#123; ... &#125; <span class="comment">// -&gt; dispatch('account/login')</span></span><br><span class="line">      &#125;,</span><br><span class="line">      mutations: &#123;</span><br><span class="line">        login () &#123; ... &#125; <span class="comment">// -&gt; commit('account/login')</span></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// åµŒå¥—æ¨¡å—</span></span><br><span class="line">      modules: &#123;</span><br><span class="line">        <span class="comment">// ç»§æ‰¿çˆ¶æ¨¡å—çš„å‘½åç©ºé—´</span></span><br><span class="line">        myPage: &#123;</span><br><span class="line">          state: &#123; ... &#125;,</span><br><span class="line">          getters: &#123;</span><br><span class="line">            profile () &#123; ... &#125; <span class="comment">// -&gt; getters['account/profile']</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿›ä¸€æ­¥åµŒå¥—å‘½åç©ºé—´</span></span><br><span class="line">        posts: &#123;</span><br><span class="line">          namespaced: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">          state: &#123; ... &#125;,</span><br><span class="line">          getters: &#123;</span><br><span class="line">            popular () &#123; ... &#125; <span class="comment">// -&gt; getters['account/posts/popular']</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="åœ¨å¸¦å‘½åç©ºé—´çš„æ¨¡å—å†…è®¿é—®å…¨å±€å†…å®¹"><a href="#åœ¨å¸¦å‘½åç©ºé—´çš„æ¨¡å—å†…è®¿é—®å…¨å±€å†…å®¹" class="headerlink" title="åœ¨å¸¦å‘½åç©ºé—´çš„æ¨¡å—å†…è®¿é—®å…¨å±€å†…å®¹"></a>åœ¨å¸¦å‘½åç©ºé—´çš„æ¨¡å—å†…è®¿é—®å…¨å±€å†…å®¹</h4><p>å¸¦å‘½åç©ºé—´çš„æ¨¡å—å†…è®¿é—®å…¨å±€ state ã€getter å’Œ actionï¼Œ <code>rootState</code>å’Œ <code>rootGetter</code>ä¼šä½œä¸ºç¬¬ä¸‰å’Œç¬¬å››å‚æ•°ä¼ å…¥ <code>getter</code>ï¼Œä¹Ÿä¼šé€šè¿‡ <code>context</code> å¯¹è±¡çš„å±æ€§ä¼ å…¥ actionã€‚</p>
<p>éœ€è¦åœ¨å…¨å±€å‘½åç©ºé—´å†…åˆ†å‘ <code>action</code> æˆ–æäº¤ <code>mutation</code>ï¼Œå°† <code>{ root: true }</code> ä½œä¸ºç¬¬ä¸‰å‚æ•°ä¼ ç»™ <code>dispatch</code> æˆ– <code>commit</code> å³å¯ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">modules: &#123;</span><br><span class="line">  foo: &#123;</span><br><span class="line">    namespaced: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">    getters: &#123;</span><br><span class="line">      <span class="comment">// åœ¨è¿™ä¸ªæ¨¡å—çš„ getter ä¸­ï¼Œ`getters` è¢«å±€éƒ¨åŒ–äº†</span></span><br><span class="line">      <span class="comment">// å…¨å±€çš„ state å’Œ getters å¯ä»¥ä½œä¸ºç¬¬ä¸‰ã€å››ä¸ªå‚æ•°è¿›è¡Œä¼ å…¥ï¼Œä»è€Œè®¿é—®å…¨å±€ state å’Œ getters</span></span><br><span class="line">      someGetter (state, getters, rootState, rootGetters) &#123;</span><br><span class="line">        getters.someOtherGetter <span class="comment">// -&gt; 'foo/someOtherGetter'</span></span><br><span class="line">        rootGetters.someOtherGetter <span class="comment">// -&gt; 'someOtherGetter'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      someOtherGetter: <span class="function"><span class="params">state</span> =&gt;</span> &#123; ... &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    actions: &#123;</span><br><span class="line">      <span class="comment">// åœ¨è¿™ä¸ªæ¨¡å—ä¸­ï¼Œ dispatch å’Œ commit ä¹Ÿè¢«å±€éƒ¨åŒ–äº†</span></span><br><span class="line">      <span class="comment">// ä»–ä»¬å¯ä»¥æ¥å— `root` å±æ€§ä»¥è®¿é—®æ ¹ dispatch æˆ– commit</span></span><br><span class="line">      someAction (&#123; dispatch, commit, getters, rootGetters &#125;) &#123;</span><br><span class="line">        getters.someGetter <span class="comment">// -&gt; 'foo/someGetter'</span></span><br><span class="line">        rootGetters.someGetter <span class="comment">// -&gt; 'someGetter'</span></span><br><span class="line"></span><br><span class="line">        dispatch(<span class="string">'someOtherAction'</span>) <span class="comment">// -&gt; 'foo/someOtherAction'</span></span><br><span class="line">        dispatch(<span class="string">'someOtherAction'</span>, <span class="literal">null</span>, &#123; <span class="attr">root</span>: <span class="literal">true</span> &#125;) <span class="comment">// -&gt; 'someOtherAction'</span></span><br><span class="line"></span><br><span class="line">        commit(<span class="string">'someMutation'</span>) <span class="comment">// -&gt; 'foo/someMutation'</span></span><br><span class="line">        commit(<span class="string">'someMutation'</span>, <span class="literal">null</span>, &#123; <span class="attr">root</span>: <span class="literal">true</span> &#125;) <span class="comment">// -&gt; 'someMutation'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      someOtherAction (ctx, payload) &#123; ... &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="åœ¨å¸¦å‘½åç©ºé—´çš„æ¨¡å—æ³¨å†Œå…¨å±€-action"><a href="#åœ¨å¸¦å‘½åç©ºé—´çš„æ¨¡å—æ³¨å†Œå…¨å±€-action" class="headerlink" title="åœ¨å¸¦å‘½åç©ºé—´çš„æ¨¡å—æ³¨å†Œå…¨å±€ action"></a>åœ¨å¸¦å‘½åç©ºé—´çš„æ¨¡å—æ³¨å†Œå…¨å±€ action</h4><p>éœ€è¦åœ¨å¸¦å‘½åç©ºé—´çš„æ¨¡å—æ³¨å†Œå…¨å±€ <code>action</code>ï¼Œä½ å¯æ·»åŠ  <code>root: true</code>ï¼Œå¹¶å°†è¿™ä¸ª action çš„å®šä¹‰æ”¾åœ¨å‡½æ•° handler ä¸­ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  actions: &#123;</span><br><span class="line">    someOtherAction (&#123;dispatch&#125;) &#123;</span><br><span class="line">      dispatch(<span class="string">'someAction'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  modules: &#123;</span><br><span class="line">    foo: &#123;</span><br><span class="line">      namespaced: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">      actions: &#123;</span><br><span class="line">        someAction: &#123;</span><br><span class="line">          root: <span class="literal">true</span>,</span><br><span class="line">          handler (namespacedContext, payload) &#123; ... &#125; <span class="comment">// -&gt; 'someAction'</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="å¸¦å‘½åç©ºé—´çš„æ¨¡å—é‡Œè¾…åŠ©å‡½æ•°å¦‚ä½•ä½¿ç”¨ï¼Ÿ"><a href="#å¸¦å‘½åç©ºé—´çš„æ¨¡å—é‡Œè¾…åŠ©å‡½æ•°å¦‚ä½•ä½¿ç”¨ï¼Ÿ" class="headerlink" title="å¸¦å‘½åç©ºé—´çš„æ¨¡å—é‡Œè¾…åŠ©å‡½æ•°å¦‚ä½•ä½¿ç”¨ï¼Ÿ"></a>å¸¦å‘½åç©ºé—´çš„æ¨¡å—é‡Œè¾…åŠ©å‡½æ•°å¦‚ä½•ä½¿ç”¨ï¼Ÿ</h5><p>å°†æ¨¡å—çš„ç©ºé—´åç§°å­—ç¬¦ä¸²ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™ä¸Šè¿°å‡½æ•°ï¼Œè¿™æ ·æ‰€æœ‰ç»‘å®šéƒ½ä¼šè‡ªåŠ¨å°†è¯¥æ¨¡å—ä½œä¸ºä¸Šä¸‹æ–‡ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  ...mapState(<span class="string">'some/nested/module'</span>, &#123;</span><br><span class="line">    a: <span class="function"><span class="params">state</span> =&gt;</span> state.a,</span><br><span class="line">    b: <span class="function"><span class="params">state</span> =&gt;</span> state.b</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">  ...mapActions(<span class="string">'some/nested/module'</span>, [</span><br><span class="line">    <span class="string">'foo'</span>,</span><br><span class="line">    <span class="string">'bar'</span></span><br><span class="line">  ])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿˜å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>createNamespacedHelpers</code> åˆ›å»ºåŸºäºæŸä¸ªå‘½åç©ºé—´è¾…åŠ©å‡½æ•°ã€‚å®ƒè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡é‡Œæœ‰æ–°çš„ç»‘å®šåœ¨ç»™å®šå‘½åç©ºé—´å€¼ä¸Šçš„ç»„ä»¶ç»‘å®šè¾…åŠ©å‡½æ•°ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createNamespacedHelpers &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; mapState, mapActions &#125; = createNamespacedHelpers(<span class="string">'some/nested/module'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  computed: &#123;</span><br><span class="line">    <span class="comment">// åœ¨ `some/nested/module` ä¸­æŸ¥æ‰¾</span></span><br><span class="line">    ...mapState(&#123;</span><br><span class="line">      a: <span class="function"><span class="params">state</span> =&gt;</span> state.a,</span><br><span class="line">      b: <span class="function"><span class="params">state</span> =&gt;</span> state.b</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="comment">// åœ¨ `some/nested/module` ä¸­æŸ¥æ‰¾</span></span><br><span class="line">    ...mapActions([</span><br><span class="line">      <span class="string">'foo'</span>,</span><br><span class="line">      <span class="string">'bar'</span></span><br><span class="line">    ])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ¨¡å—åŠ¨æ€æ³¨å†Œ"><a href="#æ¨¡å—åŠ¨æ€æ³¨å†Œ" class="headerlink" title="æ¨¡å—åŠ¨æ€æ³¨å†Œ"></a>æ¨¡å—åŠ¨æ€æ³¨å†Œ</h4><p>åœ¨ store åˆ›å»ºä¹‹åï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>store.registerModule</code> æ–¹æ³•æ³¨å†Œæ¨¡å—ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨å†Œæ¨¡å— `myModule`</span></span><br><span class="line">store.registerModule(<span class="string">'myModule'</span>, &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// æ³¨å†ŒåµŒå¥—æ¨¡å— `nested/myModule`</span></span><br><span class="line">store.registerModule([<span class="string">'nested'</span>, <span class="string">'myModule'</span>], &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>æ¨¡å—åŠ¨æ€æ³¨å†ŒåŠŸèƒ½ä½¿å¾—å…¶ä»– Vue æ’ä»¶å¯ä»¥é€šè¿‡åœ¨ store ä¸­é™„åŠ æ–°æ¨¡å—çš„æ–¹å¼æ¥ä½¿ç”¨ Vuex ç®¡ç†çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œ<a href="https://github.com/vuejs/vuex-router-sync" target="_blank" rel="noopener">vuex-router-sync</a> æ’ä»¶å°±æ˜¯é€šè¿‡åŠ¨æ€æ³¨å†Œæ¨¡å—å°† <code>vue-router</code> å’Œ <code>vuex</code> ç»“åˆåœ¨ä¸€èµ·ï¼Œå®ç°åº”ç”¨çš„è·¯ç”±çŠ¶æ€ç®¡ç†ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>store.unregisterModule(moduleName)</code>æ¥åŠ¨æ€å¸è½½æ¨¡å—ã€‚æ³¨æ„ï¼Œä½ ä¸èƒ½ä½¿ç”¨æ­¤æ–¹æ³•å¸è½½é™æ€æ¨¡å—ï¼ˆå³åˆ›å»º store æ—¶å£°æ˜çš„æ¨¡å—ï¼‰ã€‚</p>
<p>å¾…æ›´æ–°ï½</p>

      
    </div>
    
    
    

    <div>
    
        <div>


-------------æœ¬æ–‡ç»“æŸ,æ„Ÿè°¢æ‚¨çš„é˜…è¯»-------------


</div>

        
    </div>

    <div>
      
        
<div class="my_post_copyright">
  <script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

  <!-- JSåº“ sweetalert å¯ä¿®æ”¹è·¯å¾„ -->
  <script src="https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <p><span>æœ¬æ–‡æ ‡é¢˜:</span><a href="/2018/06/26/vuex-record/">ç©çƒ‚ Vuex</a></p>
  <p><span>æ–‡ç« ä½œè€…:</span><a href="/" title="è®¿é—® Junting çš„ä¸ªäººåšå®¢">Junting</a></p>
  <p><span>å‘å¸ƒæ—¶é—´:</span>2018å¹´06æœˆ26æ—¥ - 21:06</p>
  <p><span>æœ€åæ›´æ–°:</span>2018å¹´06æœˆ26æ—¥ - 21:06</p>
  <p><span>åŸå§‹é“¾æ¥:</span><a href="/2018/06/26/vuex-record/" title="ç©çƒ‚ Vuex">http://blog.pycoder.club/2018/06/26/vuex-record/</a>
    <span class="copy-path"  title="ç‚¹å‡»å¤åˆ¶æ–‡ç« é“¾æ¥"><i class="fa fa-clipboard" data-clipboard-text="http://blog.pycoder.club/2018/06/26/vuex-record/"  aria-label="å¤åˆ¶æˆåŠŸï¼"></i></span>
  </p>
  <p><span>è®¸å¯åè®®:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç¦æ­¢æ¼”ç» 4.0 å›½é™…</a> è½¬è½½è¯·ä¿ç•™åŸæ–‡é“¾æ¥åŠä½œè€…ã€‚</p>
</div>
<script>
    var clipboard = new Clipboard('.fa-clipboard');
	  $(".fa-clipboard").click(function(){
      clipboard.on('success', function(){
        swal({
          title: "",
          text: 'å¤åˆ¶æˆåŠŸ',
          icon: "success",
          showConfirmButton: true
          });
	    });
    });
</script>


      
    </div>

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Vue/" rel="tag"><i class="fa fa-tag"></i> Vue</a>
          
            <a href="/tags/Vuex/" rel="tag"><i class="fa fa-tag"></i> Vuex</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/05/21/echo-520/" rel="next" title="Echo">
                <i class="fa fa-chevron-left"></i> Echo
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/07/03/javascript-ninja/" rel="prev" title="JavaScript å¿è€…ç§˜ç±é˜…è¯»è®°å½•">
                JavaScript å¿è€…ç§˜ç±é˜…è¯»è®°å½• <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
        
  <script>
    window._bd_share_config = {
      "common": {
        "bdText": "",
        "bdMini": "1",
        "bdMiniList": false,
        "bdPic": ""
      },
      "image": {
        "viewList": ["tsina", "douban", "sqq", "qzone", "weixin", "twi", "fbook"],
        "viewText": "åˆ†äº«åˆ°ï¼š",
        "viewSize": "16"
      },
      "slide": {
        "bdImg": "5",
        "bdPos": "left",
        "bdTop": "100"
      }
    }
  </script>

<script>
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="lv-container" data-id="city" data-uid="MTAyMC8zNjYwNS8xMzE0MA=="></div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.gif"
                alt="Junting" />
            
              <p class="site-author-name" itemprop="name">Junting</p>
              <p class="site-description motion-element" itemprop="description">æ»´æ°´ç©¿çŸ³,è®°å½•ç‚¹ç‚¹æ»´æ»´ï¼Œå›æœ›æ›²å¾„é€šå¹½å¤„ã€‚</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">åˆ†ç±»</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/twitchboy" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.jianshu.com/u/62f1642d7509" target="_blank" title="ç®€ä¹¦">
                      
                        <i class="fa fa-fw fa-globe"></i>ç®€ä¹¦</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://juejin.im/user/5840d319128fe10057679be4" target="_blank" title="æ˜é‡‘">
                      
                        <i class="fa fa-fw fa-globe"></i>æ˜é‡‘</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                å‹é“¾
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://lishaoy.net/" title="æå°‘é¢–" target="_blank">æå°‘é¢–</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Vuex-æ¦‚å¿µç¯‡"><span class="nav-number">1.</span> <span class="nav-text">Vuex æ¦‚å¿µç¯‡</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Vuex-æ˜¯ä»€ä¹ˆï¼Ÿ"><span class="nav-number">1.1.</span> <span class="nav-text">Vuex æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä»€ä¹ˆæ˜¯â€œçŠ¶æ€ç®¡ç†æ¨¡å¼â€ï¼Ÿ"><span class="nav-number">1.2.</span> <span class="nav-text">ä»€ä¹ˆæ˜¯â€œçŠ¶æ€ç®¡ç†æ¨¡å¼â€ï¼Ÿ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä¸ºä»€ä¹ˆéœ€è¦è¿™ç§â€œçŠ¶æ€ç®¡ç†æ¨¡å¼â€åº”ç”¨åˆ°é¡¹ç›®ä¸­å‘¢ï¼Ÿ"><span class="nav-number">1.3.</span> <span class="nav-text">ä¸ºä»€ä¹ˆéœ€è¦è¿™ç§â€œçŠ¶æ€ç®¡ç†æ¨¡å¼â€åº”ç”¨åˆ°é¡¹ç›®ä¸­å‘¢ï¼Ÿ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä»€ä¹ˆæƒ…å†µä¸‹æˆ‘åº”è¯¥ä½¿ç”¨-Vuexï¼Ÿ"><span class="nav-number">1.4.</span> <span class="nav-text">ä»€ä¹ˆæƒ…å†µä¸‹æˆ‘åº”è¯¥ä½¿ç”¨ Vuexï¼Ÿ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Vuex-åŸºæœ¬ä½¿ç”¨ç¯‡"><span class="nav-number">2.</span> <span class="nav-text">Vuex åŸºæœ¬ä½¿ç”¨ç¯‡</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#å®‰è£…"><span class="nav-number">2.1.</span> <span class="nav-text">å®‰è£…</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Vuex-ä¸Šè½¦å‰çš„ä¸€ä¸ªğŸŒ°"><span class="nav-number">2.2.</span> <span class="nav-text">Vuex ä¸Šè½¦å‰çš„ä¸€ä¸ªğŸŒ°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mapState-è¾…åŠ©å‡½æ•°"><span class="nav-number">2.3.</span> <span class="nav-text">mapState è¾…åŠ©å‡½æ•°</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ ¸å¿ƒæ¦‚å¿µ"><span class="nav-number">3.</span> <span class="nav-text">æ ¸å¿ƒæ¦‚å¿µ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Getter"><span class="nav-number">3.1.</span> <span class="nav-text">Getter</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#mapGetters-è¾…åŠ©å‡½æ•°"><span class="nav-number">3.1.1.</span> <span class="nav-text">mapGetters è¾…åŠ©å‡½æ•°</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Mutation"><span class="nav-number">3.2.</span> <span class="nav-text">Mutation</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Mutation-éœ€è¦éµå®ˆ-Vue-çš„å“åº”è§„åˆ™"><span class="nav-number">3.2.1.</span> <span class="nav-text">Mutation éœ€è¦éµå®ˆ Vue çš„å“åº”è§„åˆ™</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#mapMutation-è¾…åŠ©å‡½æ•°"><span class="nav-number">3.2.2.</span> <span class="nav-text">mapMutation è¾…åŠ©å‡½æ•°</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Action"><span class="nav-number">3.3.</span> <span class="nav-text">Action</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#mapAction-è¾…åŠ©å‡½æ•°"><span class="nav-number">3.3.1.</span> <span class="nav-text">mapAction è¾…åŠ©å‡½æ•°</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ç»„åˆ-Action"><span class="nav-number">3.3.2.</span> <span class="nav-text">ç»„åˆ Action</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Module"><span class="nav-number">3.4.</span> <span class="nav-text">Module</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Module-é‡Œ-stateã€mutationã€actionã€getter-ä¸Šçš„ä¸€äº›å·®å¼‚"><span class="nav-number">3.4.1.</span> <span class="nav-text">Module é‡Œ stateã€mutationã€actionã€getter ä¸Šçš„ä¸€äº›å·®å¼‚</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å‘½åç©ºé—´"><span class="nav-number">3.4.2.</span> <span class="nav-text">å‘½åç©ºé—´</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#åœ¨å¸¦å‘½åç©ºé—´çš„æ¨¡å—å†…è®¿é—®å…¨å±€å†…å®¹"><span class="nav-number">3.4.3.</span> <span class="nav-text">åœ¨å¸¦å‘½åç©ºé—´çš„æ¨¡å—å†…è®¿é—®å…¨å±€å†…å®¹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#åœ¨å¸¦å‘½åç©ºé—´çš„æ¨¡å—æ³¨å†Œå…¨å±€-action"><span class="nav-number">3.4.4.</span> <span class="nav-text">åœ¨å¸¦å‘½åç©ºé—´çš„æ¨¡å—æ³¨å†Œå…¨å±€ action</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#å¸¦å‘½åç©ºé—´çš„æ¨¡å—é‡Œè¾…åŠ©å‡½æ•°å¦‚ä½•ä½¿ç”¨ï¼Ÿ"><span class="nav-number">3.4.4.1.</span> <span class="nav-text">å¸¦å‘½åç©ºé—´çš„æ¨¡å—é‡Œè¾…åŠ©å‡½æ•°å¦‚ä½•ä½¿ç”¨ï¼Ÿ</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æ¨¡å—åŠ¨æ€æ³¨å†Œ"><span class="nav-number">3.4.5.</span> <span class="nav-text">æ¨¡å—åŠ¨æ€æ³¨å†Œ</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Junting</span>

  
</div>









        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-globe"></i> è®¿é—®ç”¨æˆ·: 
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i> è®¿é—®é‡: 
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>





  <script type="text/javascript">
    (function() {
      var hm = document.createElement("script");
      hm.src = "//tajs.qq.com/stats?sId=65857240";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  
    <script type="text/javascript">
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  












  




  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=5.1.4"></script>



  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("RpEw1EhjkayrwmMz9Coekacy-gzGzoHsz", "sRRa5nfrvhJGHDDIfruzCmjc");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  

  <!-- é¡µé¢ç‚¹å‡»å°çº¢å¿ƒ -->
  <script type="text/javascript" src="/js/src/love.js"></script>
</body>
</html>
